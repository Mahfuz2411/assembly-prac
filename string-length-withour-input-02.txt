org 100h
include 'emu8086.inc'

; String definition with a dollar sign at the end for DOS interrupt 21h function 09h
STR DB 'abcdefg$', 0

MOV AH, 2 ; Prepare for outputting a character using interrupt 21h, function 02h
MOV SI, 0 ; Initialize index to 0

PRINT 'YOUR STRING: ' ; Print the message

OUTPUT:
    MOV AL, STR[SI]  ; Move the current character to AL
    CMP AL, '$'      ; Compare the current character with '$'
    JE DONE          ; If it's the end of the string, jump to DONE
    
    MOV DL, AL       ; Move the character to DL for printing
    INT 21H          ; Print the character
    
    INC SI           ; Move to the next character
    JMP OUTPUT       ; Repeat the loop

DONE:
    PRINTN ''        ; Print a new line
    MOV CX, SI       ; The length of the string is now in SI (also CX for printing)
    ADD CX, '0'      ; Convert the length to ASCII
    MOV DX, CX       ; Move the length to DX for printing

    PRINT 'LENGTH: '
    MOV AH, 02h      ; Prepare for outputting a character using interrupt 21h, function 02h
    INT 21H          ; Print the length

    RET              ; Return

END
